{% extends '../index_master.html' %}

{% block content %}

    <h1>Agregar Producto</h1>

    <form action="{% url 'agregar_producto' %}" method="POST">
        {% csrf_token %}
        <div class="form-group row">
          <label for="nombre" class="col-4 col-form-label">Nombre del Producto</label> 
          <div class="col-8">
            <input id="nombre" name="nombre" type="text" required="required" class="form-control">
          </div>
        </div>
        <div class="form-group row">
          <label for="precio_compra" class="col-4 col-form-label">Precio de Compra</label> 
          <div class="col-8">
            <input id="precio_compra" name="precio_compra" type="number" step="0.01" required="required" class="form-control">
          </div>
        </div>
        <div class="form-group row">
          <label for="precio_venta" class="col-4 col-form-label">Precio de Venta</label> 
          <div class="col-8">
            <input id="precio_venta" name="precio_venta" type="number" step="0.01" required="required" class="form-control">
          </div>
        </div>
        <div class="form-group row">
          <label for="stock" class="col-4 col-form-label">Stock</label> 
          <div class="col-8">
            <input id="stock" name="stock" type="number" required="required" class="form-control">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-4 col-form-label">Ganancia Estimada</label>
          <div class="col-8">
            <input id="ganancia" type="text" class="form-control" readonly>
          </div>
        </div>
        <div class="form-group row">
          <div class="offset-4 col-8">
            <button name="submit" type="submit" class="btn btn-primary">Agregar Producto</button>
          </div>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('input', function(event) {
    if (event.target.id === 'precio_venta' || event.target.id === 'precio_compra') {
        var precioVenta = parseFloat(document.getElementById('precio_venta').value) || 0;
        var precioCompra = parseFloat(document.getElementById('precio_compra').value) || 0;
        var ganancia = precioVenta - precioCompra;
        document.getElementById('ganancia').value = ganancia.toFixed(2);
    }
});
</script>
{% endblock %}
